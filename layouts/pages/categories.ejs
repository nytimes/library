<!DOCTYPE html>
<html>
  <%- include('../partials/head', {title: template('landing.viewAll')}) %>
  <body>
    <%- include('../partials/header', {parentLinks: [], title: template('landing.viewAll')}) %>

    <div class="g-upper-body">
    <%- include('../partials/nav') %>
    </div>

    <div id="category-page" class="g-body">
      <div class="g-main-content">
      <% all.forEach((category) => { %>
        <%- include('../partials/childrenList', {kicker: category.prettyName, children: category.children, link: category.path}) %>
      <% }) %>
      </div>
      <script>
          let x = document.getElementsByClassName("children")
          let y = document.getElementsByClassName("children-container")
          let numButtons = 0
          for (i = 0; i < x.length; i++) { 
            if (x[i].clientHeight > 300) { 
              y[i].innerHTML = y[i].innerHTML + "<button class=\"myButton\"/>"
              numButtons = numButtons + 1;
            }
            if (document.getElementsByClassName('myButton').length > 0){
            let button = document.getElementsByClassName('myButton')[numButtons-1];
            console.log("Nothing", button)
            button.onclick = function(e) {
              console.log("Only once")
              if (button.previousSibling.previousSibling.className == "kid"){
                button.previousSibling.previousSibling.setAttribute('class', 'kid-show');
                button.setAttribute('class', 'myButton-show')
              }
              else {
                button.previousSibling.previousSibling.setAttribute('class', 'kid');
                button.setAttribute('class', 'myButton')
              }
            };
            console.log("somthing")
            }
          }
        </script>
      <%- include('../partials/footer', { pageType: 'category_index' }) %>
    </div>
  </body>
</html>
