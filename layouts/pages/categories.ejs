<!DOCTYPE html>
<html>
  <%- include('../partials/head', {title: template('landing.viewAll')}) %>
  <body>
    <%- include('../partials/header', {parentLinks: [], title: template('landing.viewAll')}) %>

    <div class="g-upper-body">
    <%- include('../partials/nav') %>
    </div>

    <div id="category-page" class="g-body">
      <div class="g-main-content">
      <% all.forEach((category) => { %>
        <%- include('../partials/childrenList', {kicker: category.prettyName, children: category.children, link: category.path}) %>
      <% }) %>
      </div>
      <script>
          let x = document.getElementsByClassName("children")
          let y = document.getElementsByClassName("children-container")
          let numButtons = 0
          for (i = 0; i < x.length; i++) { 
            console.log('print i', i)
            if (x[i].clientHeight > 100) { 
              y[i].innerHTML = y[i].innerHTML + "<button class=\"myButton\"/>"
              numButtons = numButtons + 1;
            }
            if (document.getElementsByClassName('myButton').length > 0){
            let button = document.getElementsByClassName('myButton')[numButtons-1];
            console.log('heyoo', document.getElementsByClassName('myButton'))
            button.addEventListener('click', function(e) {
              console.log('This should happen once')
              let show = false
              if (button.previousSibling.previousSibling.className == "kid"){
                console.log('button was clicked', button);
                console.log('does this work?', button.previousSibling.previousSibling)
                show = true
                // button.previousSibling.previousSibling.setAttribute('class', 'kid-show');
              }
              else {
                console.log('we missed it')
                show = false;
              }
              // else if (button.previousSibling.previousSibling.className == "kid-show"){
              //   button.previousSibling.previousSibling.setAttribute('class', 'kid');
              // }
              if (show) {
                button.previousSibling.previousSibling.setAttribute('class', 'kid-show')
                button.setAttribute('class', 'myButton-show')
                console.log("It should show something")
                return
              }
              else {
                button.previousSibling.previousSibling.setAttribute('class', 'kid')
                button.setAttribute('class', 'myButton')
                console.log("Less is more")
              }
              e.stopPropagation();
              e.preventDefault();
            });
            }
          }
        </script>
      <%- include('../partials/footer', { pageType: 'category_index' }) %>
    </div>
  </body>
</html>
